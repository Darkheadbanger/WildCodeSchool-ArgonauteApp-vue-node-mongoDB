const express=require("express"),mongoose=require("mongoose"),app=express(),memberRoutes=require("./routes/stuff"),helmet=require("helmet");var bodyParser=require("body-parser");const path=require("path");require("dotenv").config(),mongoose.connect(process.env.CONNECT_TO_MONGODB,{useNewUrlParser:!0,useUnifiedTopology:!0}).then(()=>console.log("Connexion \xe0 MongoDB r\xe9ussie !")).catch(e=>console.log(`Connexion \xe0 mongoDB \xe9chou\xe9e ${e}`)),app.use((e,o,s)=>{o.setHeader("Access-Control-Allow-Origin",process.env.FRONTEND_ORIGIN),o.setHeader("Access-Control-Allow-Headers","Origin, X-Requested-With, Content, Accept, Content-Type, Authorization"),o.setHeader("Access-Control-Allow-Methods","GET, POST, PUT, DELETE, PATCH, OPTIONS"),s()}),app.use(bodyParser.json()),app.use(express.json()),app.use(helmet()),app.use("/api/member",memberRoutes),module.exports=app;